# OpenCode Adaptation of Intelligent Claude Code
# Configuration for agent-based development system

## Agent System Configuration
agent_system:
  enabled: true
  directory: .opencode/agents
  auto_load_agents: true
  
  # 14 Specialist Agents (from intelligent-claude-code)
  specialists:
    pm:
      enabled: true
      priority: 1
      role: "Project management and coordination"
      scope: "Main scope - creates AgentTasks, coordinates team"
      
    architect:
      enabled: true
      priority: 2
      role: "System architecture and technical design"
      
    developer:
      enabled: true
      priority: 3
      role: "Software implementation and feature development"
      
    ai-engineer:
      enabled: true
      priority: 3
      role: "AI/ML and behavioral frameworks"
      
    database-engineer:
      enabled: true
      priority: 3
      role: "Database design and optimization"
      
    devops-engineer:
      enabled: true
      priority: 3
      role: "CI/CD and deployment automation"
      
    system-engineer:
      enabled: true
      priority: 3
      role: "Infrastructure and system operations"
      
    security-engineer:
      enabled: true
      priority: 3
      role: "Security and compliance frameworks"
      
    qa-engineer:
      enabled: true
      priority: 3
      role: "Quality assurance and test planning"
      
    backend-tester:
      enabled: true
      priority: 3
      role: "Backend testing and API validation"
      
    web-designer:
      enabled: true
      priority: 3
      role: "UI/UX design and user experience"
      
    requirements-engineer:
      enabled: true
      priority: 3
      role: "Requirements analysis and documentation"

## AgentTask System (Product Requirement Blueprints)
agenttask_system:
  templates_directory: agenttask-templates
  auto_create_from_user_requests: true
  
  # Complexity Thresholds (from intelligent-claude-code)
  complexity_tiers:
    nano:
      points: "0-2"
      description: "Trivial one-line changes, config updates, typo fixes"
      execution_steps: 4
      template: "nano-agenttask-template.yaml"
      
    tiny:
      points: "3-5"
      description: "Simple single-file tasks"
      execution_steps: 7
      template: "tiny-agenttask-template.yaml"
      
    medium:
      points: "6-15"
      description: "Standard multi-file features"
      execution_steps: 9
      template: "medium-agenttask-template.yaml"
      
    large:
      points: "16-30"
      description: "Complex features - create STORY first"
      requires_breakdown: true
      template: "large-agenttask-template.yaml"
      
    mega:
      points: "30+"
      description: "System-wide changes - create STORY first"
      requires_breakdown: true
      template: "mega-agenttask-template.yaml"
  
  # Workflow Rules
  workflow:
    auto_create_story_threshold: 16  # Points
    require_memory_search_before_implementation: true
    embed_best_practices_in_agenttask: true
    embed_code_examples_in_agenttask: true
    
## Memory System
memory_system:
  directory: memory
  auto_search_before_implementation: true
  max_file_size_kb: 5  # Token efficiency
  
  # Organization Structure
  organization:
    by_topic: true
    subdirectories:
      - Learning      # Error patterns and solutions
      - Pattern       # Reusable code patterns
      - Knowledge     # Domain knowledge
      - Debugging     # Troubleshooting guides
  
  # Storage Rules
  storage_rules:
    implementation_patterns: "memory/Pattern/"
    debugging_solutions: "memory/Learning/"
    architecture_decisions: "memory/Knowledge/"
    configuration_guides: "memory/Configuration/"
    optimization_techniques: "memory/Optimization/"

## Directory Structure (Project Organization)
directory_structure:
  stories: "stories"              # User stories (6+ complexity points)
  memory: "memory"                # Learning storage
  agenttasks: "agenttasks"        # Generated AgentTasks
  docs: "docs"                    # Documentation
  summaries: "summaries"          # Completion summaries
  
  # File Routing Rules
  routing_rules:
    story_files: "stories/"
    summary_files: "summaries/"
    memory_files: "memory/"
    documentation: "docs/"
    
## Workflow Settings (Behavioral Patterns)
workflow_settings:
  
  # Main Scope Enforcement (soft - via agent instructions)
  main_scope_mode:
    enabled: true
    mode: "coordination_only"
    description: "PM creates AgentTasks, agents execute technical work"
    pm_restrictions:
      - "No direct technical command execution"
      - "No file editing outside coordination"
      - "Must delegate via AgentTask creation"
  
  # Git Privacy (pattern - not enforced)
  git_privacy:
    enabled: true
    strip_ai_mentions: true
    patterns:
      - "@\\w+-?\\w+"      # @Agent mentions
      - "Claude"           # Claude references
      - "AI Assistant"     # Generic AI mentions
      - "intelligent-claude-code"  # System name
    guidance: "Remove AI mentions before git commit"
  
  # File Routing (guidance - not enforced)
  file_routing:
    enabled: true
    patterns:
      summary_keywords:
        - "summary"
        - "report"
        - "fix"
        - "analysis"
        - "review"
        destination: "summaries/"
      
      story_patterns:
        - "STORY-"
        - "EPIC-"
        destination: "stories/"
      
      memory_patterns:
        - Pattern detection based on content
        destination: "memory/[topic]/"
  
  # Complexity Analysis (for AgentTask sizing)
  complexity_analysis:
    enabled: true
    factors:
      file_impact: "0-10 points"
      code_volume: "0-10 points"
      external_integrations: "0-5 points"
      security_implications: "0-3 points"
      coordination_required: "0-2 points"

## Best Practices System
best_practices:
  directory: ".opencode/patterns"
  auto_discovery: true
  
  # Categories
  categories:
    development: ".opencode/patterns/development/"
    architecture: ".opencode/patterns/architecture/"
    operations: ".opencode/patterns/operations/"
    security: ".opencode/patterns/security/"
    quality: ".opencode/patterns/quality/"
    collaboration: ".opencode/patterns/collaboration/"
  
  # Injection into AgentTasks
  injection_rules:
    embed_in_agenttask: true
    max_practices_per_agenttask: 3
    scoring_by_relevance: true

## Behavioral Patterns (from intelligent-claude-code behaviors)
behavioral_patterns:
  
  # Main scope blocking (soft enforcement)
  main_scope_blocking:
    principle: "Main scope = AgentTask creation only"
    agent_scope: "Work execution only"
    guidance: |
      Block work execution in main scope.
      PM creates AgentTasks â†’ Agents execute work.
  
  # Agent context detection (simulated without hooks)
  agent_context:
    principle: "Differentiate PM vs Agent operations"
    pm_mode: "Coordination and AgentTask creation"
    agent_mode: "Technical implementation"
  
  # Memory-first operations
  memory_first:
    principle: "Check memory before implementing"
    workflow:
      1: "Search memory for patterns"
      2: "Review existing solutions"
      3: "Implement with context"
      4: "Store new learnings"
  
  # AgentTask structure
  agenttask_structure:
    principle: "Complete context embedding"
    required_sections:
      - goal
      - why
      - context
      - implementation
      - validation
      - completion

## Integration Configuration
integrations:
  
  # MCP Servers (from opencode.jsonc)
  mcp:
    context7:
      enabled: true
      purpose: "Real-time documentation search"
    
    # Add more as needed:
    # filesystem: { enabled: true }
    # database: { enabled: true }
  
  # Git Integration
  git:
    privacy_mode: true
    auto_commit_messages: false
    branch_strategy: "feature_branch"
  
  # External Documentation
  documentation_sources:
    - context7  # MCP server
    - project_wikis
    - code_examples

## Quality Standards (from AGENTS.md)
quality_standards:
  
  # C# Standards
  csharp:
    naming:
      classes: "PascalCase"
      methods: "PascalCase"
      properties: "PascalCase"
      variables: "camelCase"
      parameters: "camelCase"
    patterns:
      - "Async/await for asynchronous operations"
      - "try-catch for error handling"
      - "LINQ for data queries"
    indentation: "4 spaces"
  
  # TypeScript Standards
  typescript:
    naming:
      variables: "camelCase"
      functions: "camelCase"
      classes: "PascalCase"
      interfaces: "PascalCase"
    patterns:
      - "const/let (no var)"
      - "Arrow functions"
      - "Explicit type imports"
    indentation: "2 spaces"
  
  # General Standards
  general:
    - "Meaningful names"
    - "Small functions"
    - "Descriptive commit messages"

---
# OpenCode Adaptation Notes:
# 1. No hook system - enforcement via agent instructions
# 2. All behavioral patterns are guidance, not blocking
# 3. Agents have full tool access, follow patterns through instructions
# 4. Configuration is documentation + agent prompts, not runtime enforcement
